!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=6)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=document.getElementById("game"),o=document.getElementById("canvas"),l=o.getContext("2d"),a=document.querySelector(".js-play"),r=document.querySelector(".js-next"),s=document.querySelectorAll(".js-replay"),c=document.querySelector(".score"),h={context:l,container:n,canvasWidth:o.width,canvasHeight:o.height,status:"start",level:1,totalLevel:4,numPerLine:6,canvasPadding:30,bulletSize:10,bulletSpeed:10,enemySpeed:2,enemySize:50,enemyGap:10,enemyIcon:"./img/enemy.png",enemyBoomIcon:"./img/boom.png",enemyDirection:"right",planeSpeed:7,planeSize:{width:60,height:100},planeIcon:"./img/plane.png",score:0,plane:{},playBtn:a,nextLevelBtn:r,replayBtn:s,scoreHTML:c};t.global=h},function(e,t,i){"use strict";function n(e,t,i){return!(e.y+e.height>=t.y)&&(!(t.x+t.width+5<e.x)&&(!(e.x+e.width+5<t.x)&&(t.y-e.y-e.height<=i||void 0)))}function o(e,t,i){return!(e.x+e.width>=t.x)&&(!(t.y+t.height+5<e.y)&&(!(e.y+e.height+5<t.y)&&(t.x-e.x-e.width<=i||void 0)))}Object.defineProperty(t,"__esModule",{value:!0}),t.checkRectCollision=function(e,t,i){return e.y<t.y?n(e,t,i):e.y>=t.y?n(t,e,i):e.x<t.x?o(e,t,i):e.x>=t.x&&o(t,e,i)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Monster=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(0);var l=o.global.context,a=o.global.canvasWidth,r=(o.global.canvasHeight,new Image);r.src=o.global.enemyIcon;var s=new Image;s.src=o.global.enemyBoomIcon;var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=0,this.y=0,this.isAlive=!0,this.direction=o.global.enemyDirection,this.deadFrame=3}return n(e,[{key:"init",value:function(e,t){this.x=e,this.y=t,this.isAlive=!0}},{key:"drawMonster",value:function(){this.isAlive&&l.drawImage(this.imgAlive,this.x,this.y,this.width,this.height)}},{key:"checkTouchEdge",value:function(){return!!this.isAlive&&(this.x+this.width+o.global.canvasPadding>=a&&"right"===this.direction||(this.x<=o.global.canvasPadding&&"left"===this.direction||void 0))}},{key:"moveVertical",value:function(){this.isAlive&&(this.y+=o.global.enemySize)}},{key:"changeDirection",value:function(){this.isAlive&&("left"===this.direction?this.direction="right":"right"===this.direction&&(this.direction="left"))}},{key:"moveHorizontal",value:function(){this.isAlive&&("right"===this.direction?this.x+=o.global.enemySpeed:"left"===this.direction&&(this.x-=o.global.enemySpeed))}},{key:"die",value:function(){this.isAlive=!1}},{key:"checkReachBottom",value:function(){if(this.y>470)return!0}},{key:"drawDeadMonster",value:function(){this.isAlive||0===this.deadFrame||(l.drawImage(this.imgDead,this.x,this.y,this.width,this.height),this.deadFrame--)}}]),e}();c.prototype.width=o.global.enemySize,c.prototype.height=o.global.enemySize,c.prototype.imgAlive=r,c.prototype.imgDead=s,t.Monster=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bullet=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(0);var l=o.global.context,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=o.global.plane.x+.5*o.global.plane.width,this.y=o.global.plane.y-o.global.bulletSize,this.isAlive=!1}return n(e,[{key:"init",value:function(){this.isAlive=!1}},{key:"move",value:function(){this.y>=30&&!0===this.isAlive&&(this.y=this.y-o.global.bulletSpeed)}},{key:"born",value:function(){this.isAlive=!0}},{key:"checkDie",value:function(){this.y<30&&this.die()}},{key:"die",value:function(){this.isAlive=!1}},{key:"drawBullet",value:function(){this.isAlive&&(l.beginPath(),l.strokeStyle="#fff",l.moveTo(this.x,this.y),l.lineTo(this.x,this.y+this.height),l.stroke())}}]),e}();a.prototype.width=1,a.prototype.height=o.global.bulletSize,t.Bullet=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plane=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(0);o.global.container;var l=o.global.context,a=o.global.canvasWidth,r=o.global.canvasHeight,s=new Image;s.src=o.global.planeIcon;var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=o.global.planeSize.width,this.height=o.global.planeSize.height,this.x=.5*a-.5*this.width,this.y=r-this.height,this.img=s,this.speed=o.global.planeSpeed,this.scope=o.global.canvasPadding,this.toLeft=!1,this.toRight=!1}return n(e,[{key:"init",value:function(){this.x=.5*a-.5*this.width,this.y=r-this.height}},{key:"move",value:function(){this.toLeft?this.x>=this.scope&&(this.x=this.x-this.speed):this.toRight&&this.x<=a-this.width-this.scope&&(this.x=this.x+this.speed)}},{key:"drawPlane",value:function(){l.drawImage(this.img,this.x,this.y,this.width,this.height)}}]),e}();t.Plane=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var n,o=i(0),l=i(4),a=i(3),r=i(2),s=i(1),c=o.global.context,h=o.global.canvasWidth,u=o.global.canvasHeight,g={},d=[],f=[],v=0,y={init:function(){v=0,o.global.plane=new l.Plane,g=o.global.plane,d=[],f=[];for(var e=0;e<o.global.level;e++)for(var t=0;t<o.global.numPerLine;t++){var i=new r.Monster;i.init(30+t*(o.global.enemyGap+o.global.enemySize),30+e*o.global.enemySize),f.push(i)}},bindEvent:function(){var e=this;o.global.container.addEventListener("click",function(t){var i=t.target;i&&(i===o.global.playBtn?(e.init(),e.play(),e.gameLoop()):i===o.global.nextLevelBtn?(o.global.level++,e.init(),e.play(),e.gameLoop()):i!==o.global.replayBtn[0]&&i!==o.global.replayBtn[1]||(o.global.level=1,o.global.score=0,e.init(),e.play(),e.gameLoop()))})},play:function(){this.setStatus("playing")},setStatus:function(e){o.global.status=e,this.status=e,o.global.container.setAttribute("data-status",e)},gameLoop:function(){n=requestAnimationFrame(y.gameLoop),c.clearRect(0,0,h,u),y.drawScore(),g.drawPlane(),g.move();for(var e=0;e<d.length;e++)d[e].drawBullet(),d[e].move(),d[e].checkDie();for(var t=!1,i=!1,l=0;l<f.length;l++){if(f[l].checkReachBottom()){i=!0;break}f[l].drawMonster(),f[l].moveHorizontal(),f[l].checkTouchEdge()&&(t=!0)}if(i&&(y.setStatus("failed"),c.clearRect(0,0,h,u),cancelAnimationFrame(n),i=!1,o.global.scoreHTML.innerHTML=o.global.score),t){for(var a=0;a<f.length;a++)f[a].moveVertical(),f[a].changeDirection();t=!1}for(var r=0;r<f.length;r++){f[r].drawDeadMonster();for(var b=0;b<d.length;b++)d[b]&&d[b].isAlive&&f[r].isAlive&&(0,s.checkRectCollision)(d[b],f[r],10)&&(d[b].die(),f[r].die(),v++,o.global.score++)}v===o.global.level*o.global.numPerLine&&(o.global.level===o.global.totalLevel?(y.setStatus("all-success"),c.clearRect(0,0,h,u),cancelAnimationFrame(n)):(y.setStatus("success"),c.clearRect(0,0,h,u),cancelAnimationFrame(n)))},keyResponse:function(){document.addEventListener("keydown",function(e){var t=e.keyCode||e.which||e.charCode;37===t?g.toLeft=!0:39===t&&(g.toRight=!0)}),document.addEventListener("keyup",function(e){var t=e.keyCode||e.which||e.charCode;if(37===t)g.toLeft=!1;else if(39===t)g.toRight=!1;else if(32===t){var i=new a.Bullet;i.born(),d.push(i)}})},drawScore:function(){c.fillStyle="#fff",c.font="20px 黑体",c.fillText("当前关卡:"+o.global.level,0,20),c.fillText("当前关卡得分:"+v,200,20),c.fillText("总分:"+o.global.score,400,20)}};t.Controller=y},function(e,t,i){"use strict";i(14);var n=i(5);n.Controller.bindEvent(),n.Controller.keyResponse()},,,,,,,,function(e,t){}]);